<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  <title>Atira Help Desk</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">

      <link rel="stylesheet" href="css/style.css?=v2">

  
</head>

<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("button").click(
      function() {
        var yourdomain = 'chattechsolutions'; // Your freshdesk domain name. Ex., yourcompany
        var api_key = 'Gb30TrNG1EhHoZIE11Q1'; // Ref: https://support.freshdesk.com/support/solutions/articles/215517-how-to-find-your-api-key
        
          
        var emailAddress = document.getElementById("email").value;
        var describeIssue = document.getElementById("description").value;
        var subjectLine = document.getElementById("subjectLine").value;
        var phoneNumber = document.getElementById("phoneNumber").value;
        var userName = document.getElementById("userName").value;
          
        var formdata = new FormData();
        formdata.append('description', describeIssue);
        formdata.append('name', userName);
        formdata.append('email', emailAddress);
        formdata.append('subject', subjectLine);
        formdata.append('priority', '2');
        formdata.append('status', '2');        
        formdata.append('type', 'Atira Hotels');
        formdata.append('attachments[]', $('#myFile')[0].files[0]);
        $.ajax(
          {
            url: "https://"+yourdomain+".freshdesk.com/api/v2/tickets",
            type: 'POST',
            contentType: false,
            processData: false,
            headers: {
              "Authorization": "Basic " + btoa(api_key + ":x")
            },
            data: formdata,
            success: function(data, textStatus, jqXHR) {
              $('#result').text('Success');
              $('#code').text(jqXHR.status);
              $('#response').html(JSON.stringify(data, null, "<br/>"));
            },
            error: function(jqXHR, tranStatus) {
              $('#result').text('Error');
              $('#code').text(jqXHR.status);
              x_request_id = jqXHR.getResponseHeader('X-Request-Id');
              response_text = jqXHR.responseText;
              $('#response').html(" Error Message : <b style='color: red'>"+response_text+"</b>.<br/> Your X-Request-Id is : <b>" + x_request_id + "</b>. Please contact support@freshdesk.com with this id for more information.");
            }
          }
        );
      }
    );
});
</script>
</head>
<body>

  
      
    <img class= "bannerImage" src = "Atira_WebLogo.png"/>
    <h1>Support Portal</h1>
<div class="support">
  <form>
    <div class="fieldgroup fieldgroup-name">
       <label>Name</label>
       <input id = "userName" type="text" placeholder="Full Name" name="first" required =""/>
    </div>
    <div class="fieldgroup fieldgroup-site">
       <label>Email</label>
       <input id = "email" type="text" placeholder="Email Address"/>
    </div>
       <div class="fieldgroup fieldgroup-site">
       <label>Phone</label>
       <input id ="phoneNumber" type="text" placeholder="Best Number To Reach You"/>
    </div>
    <div class="fieldgroup fieldgroup-issue-url">
       <label>Issue</label>
       <input id= "subjectLine" type="text" placeholder="Summarize Your Issue"/>
    </div>

    <div class="fieldgroup fieldgroup-question">
       <label>Description</label>
      <textarea id="description"></textarea>
    </div>
          
      <div class="fieldgroup fieldgroup-question">
       <label class = "hideMe"></label>

      <button type="submit">Submit Ticket</button>
      </div>

  </form>
</div>
  
<b>Attachment to be added </b><input type='file' id='myFile' />
<br>
<table cellspacing = '10'>
  <tr>
    <td> <b>Result</b></td>
    <td> <div id = 'result'></div> </td>
  </tr>
  <tr>
    <td> <b>Code</b></td>
    <td> <div id = 'code'></div> </td>
  </tr>
  <tr>
    <td> <b>Response</b></td>
    <td> <div id = 'response'></div> </td>
  </tr>
</table>
</body>
</html>


